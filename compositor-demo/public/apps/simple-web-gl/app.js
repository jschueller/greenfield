!function(t){var r={};function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)e.d(n,i,function(r){return t[r]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="/",e(e.s=7)}({7:function(t,r,e){t.exports=e(8)},8:function(t,r,e){"use strict";e.r(r);var n={};e.r(n),e.d(n,"create",(function(){return Lt})),e.d(n,"clone",(function(){return Bt})),e.d(n,"copy",(function(){return Tt})),e.d(n,"fromValues",(function(){return Ct})),e.d(n,"set",(function(){return It})),e.d(n,"identity",(function(){return Ft})),e.d(n,"transpose",(function(){return Dt})),e.d(n,"invert",(function(){return Ut})),e.d(n,"adjoint",(function(){return jt})),e.d(n,"determinant",(function(){return zt})),e.d(n,"multiply",(function(){return kt})),e.d(n,"translate",(function(){return Nt})),e.d(n,"scale",(function(){return Vt})),e.d(n,"rotate",(function(){return qt})),e.d(n,"rotateX",(function(){return Yt})),e.d(n,"rotateY",(function(){return Gt})),e.d(n,"rotateZ",(function(){return Ht})),e.d(n,"fromTranslation",(function(){return $t})),e.d(n,"fromScaling",(function(){return Wt})),e.d(n,"fromRotation",(function(){return Xt})),e.d(n,"fromXRotation",(function(){return Kt})),e.d(n,"fromYRotation",(function(){return Qt})),e.d(n,"fromZRotation",(function(){return Zt})),e.d(n,"fromRotationTranslation",(function(){return Jt})),e.d(n,"fromQuat2",(function(){return tr})),e.d(n,"getTranslation",(function(){return rr})),e.d(n,"getScaling",(function(){return er})),e.d(n,"getRotation",(function(){return nr})),e.d(n,"fromRotationTranslationScale",(function(){return ir})),e.d(n,"fromRotationTranslationScaleOrigin",(function(){return or})),e.d(n,"fromQuat",(function(){return sr})),e.d(n,"frustum",(function(){return ar})),e.d(n,"perspective",(function(){return ur})),e.d(n,"perspectiveFromFieldOfView",(function(){return fr})),e.d(n,"ortho",(function(){return cr})),e.d(n,"lookAt",(function(){return lr})),e.d(n,"targetTo",(function(){return hr})),e.d(n,"str",(function(){return dr})),e.d(n,"frob",(function(){return _r})),e.d(n,"add",(function(){return vr})),e.d(n,"subtract",(function(){return br})),e.d(n,"multiplyScalar",(function(){return mr})),e.d(n,"multiplyScalarAndAdd",(function(){return gr})),e.d(n,"exactEquals",(function(){return pr})),e.d(n,"equals",(function(){return yr})),e.d(n,"mul",(function(){return Mr})),e.d(n,"sub",(function(){return wr}));var i={};e.r(i),e.d(i,"create",(function(){return xr})),e.d(i,"clone",(function(){return Ar})),e.d(i,"length",(function(){return Pr})),e.d(i,"fromValues",(function(){return Er})),e.d(i,"copy",(function(){return Rr})),e.d(i,"set",(function(){return Sr})),e.d(i,"add",(function(){return Or})),e.d(i,"subtract",(function(){return Lr})),e.d(i,"multiply",(function(){return Br})),e.d(i,"divide",(function(){return Tr})),e.d(i,"ceil",(function(){return Cr})),e.d(i,"floor",(function(){return Ir})),e.d(i,"min",(function(){return Fr})),e.d(i,"max",(function(){return Dr})),e.d(i,"round",(function(){return Ur})),e.d(i,"scale",(function(){return jr})),e.d(i,"scaleAndAdd",(function(){return zr})),e.d(i,"distance",(function(){return kr})),e.d(i,"squaredDistance",(function(){return Nr})),e.d(i,"squaredLength",(function(){return Vr})),e.d(i,"negate",(function(){return qr})),e.d(i,"inverse",(function(){return Yr})),e.d(i,"normalize",(function(){return Gr})),e.d(i,"dot",(function(){return Hr})),e.d(i,"cross",(function(){return $r})),e.d(i,"lerp",(function(){return Wr})),e.d(i,"hermite",(function(){return Xr})),e.d(i,"bezier",(function(){return Kr})),e.d(i,"random",(function(){return Qr})),e.d(i,"transformMat4",(function(){return Zr})),e.d(i,"transformMat3",(function(){return Jr})),e.d(i,"transformQuat",(function(){return te})),e.d(i,"rotateX",(function(){return re})),e.d(i,"rotateY",(function(){return ee})),e.d(i,"rotateZ",(function(){return ne})),e.d(i,"angle",(function(){return ie})),e.d(i,"zero",(function(){return oe})),e.d(i,"str",(function(){return se})),e.d(i,"exactEquals",(function(){return ae})),e.d(i,"equals",(function(){return ue})),e.d(i,"sub",(function(){return ce})),e.d(i,"mul",(function(){return le})),e.d(i,"div",(function(){return he})),e.d(i,"dist",(function(){return de})),e.d(i,"sqrDist",(function(){return _e})),e.d(i,"len",(function(){return ve})),e.d(i,"sqrLen",(function(){return be})),e.d(i,"forEach",(function(){return me}));var o=function(t,r,e,n){return new(e||(e=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var r;t.done?i(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(s,a)}u((n=n.apply(t,r||[])).next())}))};const s=new TextDecoder("utf8");class a{constructor(t){this._raw=t}static parse(t){return new a(256*t>>0)}asInt(){return this._raw/256>>0}asDouble(){return this._raw/256}}class u{constructor(t,r,e,n,i){this.fd=t,this.type=r,this.url=e,this._onGetTransferable=n,this._onClose=i}getTransferable(){return o(this,void 0,void 0,(function*(){return yield this._onGetTransferable(this)}))}close(){this._onClose(this)}}function f(t){return{value:t,type:"u",size:4,optional:!1,_marshallArg:function(r){new Uint32Array(r.buffer,r.bufferOffset,1)[0]=t,r.bufferOffset+=this.size}}}function c(t){return{value:t,type:"i",size:4,optional:!1,_marshallArg:function(t){new Int32Array(t.buffer,t.bufferOffset,1)[0]=this.value,t.bufferOffset+=this.size}}}function l(t){return{value:t,type:"o",size:4,optional:!1,_marshallArg:function(t){new Uint32Array(t.buffer,t.bufferOffset,1)[0]=this.value.id,t.bufferOffset+=this.size}}}function h(t){return{value:t,type:"o",size:4,optional:!0,_marshallArg:function(t){new Uint32Array(t.buffer,t.bufferOffset,1)[0]=void 0===this.value?0:this.value.id,t.bufferOffset+=this.size}}}function d(){return{value:0,type:"n",size:4,optional:!1,_marshallArg:function(t){new Uint32Array(t.buffer,t.bufferOffset,1)[0]=this.value,t.bufferOffset+=this.size}}}function _(t){return{value:t+"\0",type:"s",size:4+(t.length+1+3&-4),optional:!1,_marshallArg:function(t){new Uint32Array(t.buffer,t.bufferOffset,1)[0]=this.value.length;const r=this.value.length,e=new Uint8Array(t.buffer,t.bufferOffset+4,r);for(let t=0;t<r;t++)e[t]=this.value[t].charCodeAt(0);t.bufferOffset+=this.size}}}function v(t,r){if(t.consumed+r>t.size)throw new Error("Request too short.");t.consumed+=r}function b(t){return v(t,4),t.buffer[t.bufferOffset++]}function m(t){v(t,4);const r=new Int32Array(t.buffer.buffer,t.buffer.byteOffset+t.bufferOffset*Uint32Array.BYTES_PER_ELEMENT,1)[0];return t.bufferOffset+=1,r}function g(t){v(t,4);const r=new Int32Array(t.buffer.buffer,t.buffer.byteOffset+t.bufferOffset*Uint32Array.BYTES_PER_ELEMENT,1)[0];return t.bufferOffset+=1,new a(r>>0)}function p(t,r){v(t,4);const e=t.buffer[t.bufferOffset++],n=r.wlObjects[e];if(n)return n;throw new Error("Unknown object id "+e)}function y(t){v(t,4);const r=t.buffer[t.bufferOffset++],e=r+3&-4;v(t,e);const n=new Uint8Array(t.buffer.buffer,t.buffer.byteOffset+t.bufferOffset*Uint32Array.BYTES_PER_ELEMENT,r-1);return t.bufferOffset+=e/4,s.decode(n)}function M(t){v(t,4);const r=t.buffer[t.bufferOffset++],e=r+3&-4;v(t,e);const n=t.buffer.buffer.slice(t.buffer.byteOffset+t.bufferOffset*Uint32Array.BYTES_PER_ELEMENT,t.buffer.byteOffset+t.bufferOffset*Uint32Array.BYTES_PER_ELEMENT+r);return t.bufferOffset+=e,n}function w(t){if(t.fds.length>0){let r=t.fds.shift();if(void 0===r)throw new Error("No more webfds found in wl message.");return r}throw new Error("Not enough file descriptors in message object.")}var x=function(t,r,e,n){return new(e||(e=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var r;t.done?i(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(s,a)}u((n=n.apply(t,r||[])).next())}))};class A extends class{constructor(t){this._destroyPromise=new Promise(t=>this._destroyResolver=t),this._destroyListeners=[],this.id=t,this._destroyPromise.then(()=>this._destroyListeners.forEach(t=>t(this)))}destroy(){this._destroyResolver()}addDestroyListener(t){this._destroyListeners.push(t)}removeDestroyListener(t){this._destroyListeners=this._destroyListeners.filter(r=>r!==t)}onDestroy(){return this._destroyPromise}}{constructor(t,r,e){super(e),this.display=t,this._connection=r,r.registerWlObject(this)}destroy(){super.destroy(),this._connection.unregisterWlObject(this)}_marshallConstructor(t,r,e,n){const i=new e(this.display,this._connection,this.display.generateNextId());let o=8;return n.forEach(t=>{"n"===t.type&&(t.value=i.id),o+=t.size}),this._connection.marshallMsg(t,r,o,n),i}_marshall(t,r,e){let n=8;e.forEach(t=>n+=t.size),this._connection.marshallMsg(t,r,n,e)}}class P extends A{constructor(t,r,e){super(t,r,e)}sync(){return this._marshallConstructor(this.id,0,R,[d()])}getRegistry(){return this._marshallConstructor(this.id,1,E,[d()])}0(t){var r;return x(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.error(p(t,this._connection),b(t),y(t))}))}1(t){var r;return x(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.deleteId(b(t))}))}}class E extends A{constructor(t,r,e){super(t,r,e)}bind(t,r,e,n){return this._marshallConstructor(this.id,0,e,[f(t),_(r),f(n),d()])}0(t){var r;return x(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.global(b(t),y(t),b(t))}))}1(t){var r;return x(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.globalRemove(b(t))}))}}class R extends A{constructor(t,r,e){super(t,r,e)}0(t){var r;return x(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.done(b(t))}))}}class S{constructor(t){this._webFDs={},this._nextFD=0,this._fdDomainUUID=t}static create(t){return new S(t)}fromArrayBuffer(t){const r=this._nextFD++,e=new URL("client://");e.searchParams.append("fd",""+r),e.searchParams.append("type","ArrayBuffer"),e.searchParams.append("clientId",this._fdDomainUUID);const n=new u(r,"ArrayBuffer",e,()=>Promise.resolve(t),()=>{delete this._webFDs[r]});return this._webFDs[r]=n,n}fromImageBitmap(t){const r=this._nextFD++,e=new URL("client://");e.searchParams.append("fd",""+r),e.searchParams.append("type","ImageBitmap"),e.searchParams.append("clientId",this._fdDomainUUID);const n=new u(r,"ImageBitmap",e,()=>Promise.resolve(t),()=>{delete this._webFDs[r]});return this._webFDs[r]=n,n}fromOffscreenCanvas(t){const r=this._nextFD++,e="OffscreenCanvas",n=new URL("client://");n.searchParams.append("fd",""+r),n.searchParams.append("type",e),n.searchParams.append("clientId",this._fdDomainUUID);const i=new u(r,e,n,()=>Promise.resolve(t),()=>{delete this._webFDs[r]});return this._webFDs[r]=i,i}getWebFD(t){return this._webFDs[t]}}var O=function(t,r,e,n){return new(e||(e=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var r;t.done?i(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(s,a)}u((n=n.apply(t,r||[])).next())}))};var L;!function(t){t[t._invalidObject=0]="_invalidObject",t[t._invalidMethod=1]="_invalidMethod",t[t._noMemory=2]="_noMemory"}(L||(L={}));class B extends A{constructor(t,r,e){super(t,r,e)}0(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.done(b(t))}))}}class T extends A{constructor(t,r,e){super(t,r,e)}createSurface(){return this._marshallConstructor(this.id,0,H,[d()])}createRegion(){return this._marshallConstructor(this.id,1,ut,[d()])}}var C,I;!function(t){t[t._invalidFormat=0]="_invalidFormat",t[t._invalidStride=1]="_invalidStride",t[t._invalidFd=2]="_invalidFd"}(C||(C={})),function(t){t[t._argb8888=0]="_argb8888",t[t._xrgb8888=1]="_xrgb8888",t[t._c8=538982467]="_c8",t[t._rgb332=943867730]="_rgb332",t[t._bgr233=944916290]="_bgr233",t[t._xrgb4444=842093144]="_xrgb4444",t[t._xbgr4444=842089048]="_xbgr4444",t[t._rgbx4444=842094674]="_rgbx4444",t[t._bgrx4444=842094658]="_bgrx4444",t[t._argb4444=842093121]="_argb4444",t[t._abgr4444=842089025]="_abgr4444",t[t._rgba4444=842088786]="_rgba4444",t[t._bgra4444=842088770]="_bgra4444",t[t._xrgb1555=892424792]="_xrgb1555",t[t._xbgr1555=892420696]="_xbgr1555",t[t._rgbx5551=892426322]="_rgbx5551",t[t._bgrx5551=892426306]="_bgrx5551",t[t._argb1555=892424769]="_argb1555",t[t._abgr1555=892420673]="_abgr1555",t[t._rgba5551=892420434]="_rgba5551",t[t._bgra5551=892420418]="_bgra5551",t[t._rgb565=909199186]="_rgb565",t[t._bgr565=909199170]="_bgr565",t[t._rgb888=875710290]="_rgb888",t[t._bgr888=875710274]="_bgr888",t[t._xbgr8888=875709016]="_xbgr8888",t[t._rgbx8888=875714642]="_rgbx8888",t[t._bgrx8888=875714626]="_bgrx8888",t[t._abgr8888=875708993]="_abgr8888",t[t._rgba8888=875708754]="_rgba8888",t[t._bgra8888=875708738]="_bgra8888",t[t._xrgb2101010=808669784]="_xrgb2101010",t[t._xbgr2101010=808665688]="_xbgr2101010",t[t._rgbx1010102=808671314]="_rgbx1010102",t[t._bgrx1010102=808671298]="_bgrx1010102",t[t._argb2101010=808669761]="_argb2101010",t[t._abgr2101010=808665665]="_abgr2101010",t[t._rgba1010102=808665426]="_rgba1010102",t[t._bgra1010102=808665410]="_bgra1010102",t[t._yuyv=1448695129]="_yuyv",t[t._yvyu=1431918169]="_yvyu",t[t._uyvy=1498831189]="_uyvy",t[t._vyuy=1498765654]="_vyuy",t[t._ayuv=1448433985]="_ayuv",t[t._nv12=842094158]="_nv12",t[t._nv21=825382478]="_nv21",t[t._nv16=909203022]="_nv16",t[t._nv61=825644622]="_nv61",t[t._yuv410=961959257]="_yuv410",t[t._yvu410=961893977]="_yvu410",t[t._yuv411=825316697]="_yuv411",t[t._yvu411=825316953]="_yvu411",t[t._yuv420=842093913]="_yuv420",t[t._yvu420=842094169]="_yvu420",t[t._yuv422=909202777]="_yuv422",t[t._yvu422=909203033]="_yvu422",t[t._yuv444=875713881]="_yuv444",t[t._yvu444=875714137]="_yvu444"}(I||(I={}));class F extends A{constructor(t,r,e){super(t,r,e)}destroy(){super.destroy(),this._marshall(this.id,0,[])}0(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.release()}))}}var D;!function(t){t[t._invalidFinish=0]="_invalidFinish",t[t._invalidActionMask=1]="_invalidActionMask",t[t._invalidAction=2]="_invalidAction",t[t._invalidOffer=3]="_invalidOffer"}(D||(D={}));var U;!function(t){t[t._invalidActionMask=0]="_invalidActionMask",t[t._invalidSource=1]="_invalidSource"}(U||(U={}));var j;!function(t){t[t._role=0]="_role"}(j||(j={}));var z;!function(t){t[t._none=0]="_none",t[t._copy=1]="_copy",t[t._move=2]="_move",t[t._ask=4]="_ask"}(z||(z={}));class k extends A{constructor(t,r,e){super(t,r,e)}getShellSurface(t){return this._marshallConstructor(this.id,0,V,[d(),l(t)])}}var N;!function(t){t[t._role=0]="_role"}(N||(N={}));class V extends A{constructor(t,r,e){super(t,r,e)}pong(t){this._marshall(this.id,0,[f(t)])}move(t,r){this._marshall(this.id,1,[l(t),f(r)])}resize(t,r,e){this._marshall(this.id,2,[l(t),f(r),f(e)])}setToplevel(){this._marshall(this.id,3,[])}setTransient(t,r,e,n){this._marshall(this.id,4,[l(t),c(r),c(e),f(n)])}setFullscreen(t,r,e){this._marshall(this.id,5,[f(t),f(r),h(e)])}setPopup(t,r,e,n,i,o){this._marshall(this.id,6,[l(t),f(r),l(e),c(n),c(i),f(o)])}setMaximized(t){this._marshall(this.id,7,[h(t)])}setTitle(t){this._marshall(this.id,8,[_(t)])}setClass(t){this._marshall(this.id,9,[_(t)])}0(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.ping(b(t))}))}1(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.configure(b(t),m(t),m(t))}))}2(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.popupDone()}))}}var q,Y,G;!function(t){t[t._none=0]="_none",t[t._top=1]="_top",t[t._bottom=2]="_bottom",t[t._left=4]="_left",t[t._topLeft=5]="_topLeft",t[t._bottomLeft=6]="_bottomLeft",t[t._right=8]="_right",t[t._topRight=9]="_topRight",t[t._bottomRight=10]="_bottomRight"}(q||(q={})),function(t){t[t._inactive=1]="_inactive"}(Y||(Y={})),function(t){t[t._default=0]="_default",t[t._scale=1]="_scale",t[t._driver=2]="_driver",t[t._fill=3]="_fill"}(G||(G={}));class H extends A{constructor(t,r,e){super(t,r,e)}destroy(){super.destroy(),this._marshall(this.id,0,[])}attach(t,r,e){this._marshall(this.id,1,[h(t),c(r),c(e)])}damage(t,r,e,n){this._marshall(this.id,2,[c(t),c(r),c(e),c(n)])}frame(){return this._marshallConstructor(this.id,3,B,[d()])}setOpaqueRegion(t){this._marshall(this.id,4,[h(t)])}setInputRegion(t){this._marshall(this.id,5,[h(t)])}commit(t){this._marshall(this.id,6,[f(t)])}setBufferTransform(t){this._marshall(this.id,7,[c(t)])}setBufferScale(t){this._marshall(this.id,8,[c(t)])}damageBuffer(t,r,e,n){this._marshall(this.id,9,[c(t),c(r),c(e),c(n)])}0(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.enter(p(t,this._connection))}))}1(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.leave(p(t,this._connection))}))}}var $;!function(t){t[t._invalidScale=0]="_invalidScale",t[t._invalidTransform=1]="_invalidTransform"}($||($={}));class W extends A{constructor(t,r,e){super(t,r,e)}getPointer(){return this._marshallConstructor(this.id,0,K,[d()])}getKeyboard(){return this._marshallConstructor(this.id,1,rt,[d()])}getTouch(){return this._marshallConstructor(this.id,2,it,[d()])}release(){super.destroy(),this._marshall(this.id,3,[])}0(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.capabilities(b(t))}))}1(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.name(y(t))}))}}var X;!function(t){t[t._pointer=1]="_pointer",t[t._keyboard=2]="_keyboard",t[t._touch=4]="_touch"}(X||(X={}));class K extends A{constructor(t,r,e){super(t,r,e)}setCursor(t,r,e,n){this._marshall(this.id,0,[f(t),h(r),c(e),c(n)])}release(){super.destroy(),this._marshall(this.id,1,[])}0(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.enter(b(t),p(t,this._connection),g(t),g(t))}))}1(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.leave(b(t),p(t,this._connection))}))}2(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.motion(b(t),g(t),g(t))}))}3(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.button(b(t),b(t),b(t),b(t))}))}4(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.axis(b(t),b(t),g(t))}))}5(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.frame()}))}6(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.axisSource(b(t))}))}7(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.axisStop(b(t),b(t))}))}8(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.axisDiscrete(b(t),m(t))}))}}var Q,Z,J,tt;!function(t){t[t._role=0]="_role"}(Q||(Q={})),function(t){t[t._released=0]="_released",t[t._pressed=1]="_pressed"}(Z||(Z={})),function(t){t[t._verticalScroll=0]="_verticalScroll",t[t._horizontalScroll=1]="_horizontalScroll"}(J||(J={})),function(t){t[t._wheel=0]="_wheel",t[t._finger=1]="_finger",t[t._continuous=2]="_continuous",t[t._wheelTilt=3]="_wheelTilt"}(tt||(tt={}));class rt extends A{constructor(t,r,e){super(t,r,e)}release(){super.destroy(),this._marshall(this.id,0,[])}0(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.keymap(b(t),w(t),b(t))}))}1(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.enter(b(t),p(t,this._connection),M(t))}))}2(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.leave(b(t),p(t,this._connection))}))}3(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.key(b(t),b(t),b(t),b(t))}))}4(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.modifiers(b(t),b(t),b(t),b(t),b(t))}))}5(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.repeatInfo(m(t),m(t))}))}}var et,nt;!function(t){t[t._noKeymap=0]="_noKeymap",t[t._xkbV1=1]="_xkbV1"}(et||(et={})),function(t){t[t._released=0]="_released",t[t._pressed=1]="_pressed"}(nt||(nt={}));class it extends A{constructor(t,r,e){super(t,r,e)}release(){super.destroy(),this._marshall(this.id,0,[])}0(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.down(b(t),b(t),p(t,this._connection),m(t),g(t),g(t))}))}1(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.up(b(t),b(t),m(t))}))}2(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.motion(b(t),m(t),g(t),g(t))}))}3(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.frame()}))}4(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.cancel()}))}5(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.shape(m(t),g(t),g(t))}))}6(t){var r;return O(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.orientation(m(t),g(t))}))}}var ot,st,at;!function(t){t[t._unknown=0]="_unknown",t[t._none=1]="_none",t[t._horizontalRgb=2]="_horizontalRgb",t[t._horizontalBgr=3]="_horizontalBgr",t[t._verticalRgb=4]="_verticalRgb",t[t._verticalBgr=5]="_verticalBgr"}(ot||(ot={})),function(t){t[t._normal=0]="_normal",t[t._90=1]="_90",t[t._180=2]="_180",t[t._270=3]="_270",t[t._flipped=4]="_flipped",t[t._flipped90=5]="_flipped90",t[t._flipped180=6]="_flipped180",t[t._flipped270=7]="_flipped270"}(st||(st={})),function(t){t[t._current=1]="_current",t[t._preferred=2]="_preferred"}(at||(at={}));class ut extends A{constructor(t,r,e){super(t,r,e)}destroy(){super.destroy(),this._marshall(this.id,0,[])}add(t,r,e,n){this._marshall(this.id,1,[c(t),c(r),c(e),c(n)])}subtract(t,r,e,n){this._marshall(this.id,2,[c(t),c(r),c(e),c(n)])}}var ft;!function(t){t[t._badSurface=0]="_badSurface"}(ft||(ft={}));var ct;!function(t){t[t._badSurface=0]="_badSurface"}(ct||(ct={}));var lt=function(t,r,e,n){return new(e||(e=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var r;t.done?i(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(s,a)}u((n=n.apply(t,r||[])).next())}))};class ht extends A{constructor(t,r,e){super(t,r,e)}0(t){var r;return lt(this,void 0,void 0,(function*(){yield null===(r=this.listener)||void 0===r?void 0:r.offscreenCanvas(w(t))}))}}class dt extends A{constructor(t,r,e){super(t,r,e)}createWebGlBuffer(){return this._marshallConstructor(this.id,0,ht,[d()])}createBuffer(t){return this._marshallConstructor(this.id,1,F,[d(),l(t)])}}var _t;!function(t){t[t._role=0]="_role",t[t._defunctSurfaces=1]="_defunctSurfaces",t[t._notTheTopmostPopup=2]="_notTheTopmostPopup",t[t._invalidPopupParent=3]="_invalidPopupParent",t[t._invalidSurfaceState=4]="_invalidSurfaceState",t[t._invalidPositioner=5]="_invalidPositioner"}(_t||(_t={}));var vt,bt,mt,gt;!function(t){t[t._invalidInput=0]="_invalidInput"}(vt||(vt={})),function(t){t[t._none=0]="_none",t[t._top=1]="_top",t[t._bottom=2]="_bottom",t[t._left=3]="_left",t[t._right=4]="_right",t[t._topLeft=5]="_topLeft",t[t._bottomLeft=6]="_bottomLeft",t[t._topRight=7]="_topRight",t[t._bottomRight=8]="_bottomRight"}(bt||(bt={})),function(t){t[t._none=0]="_none",t[t._top=1]="_top",t[t._bottom=2]="_bottom",t[t._left=3]="_left",t[t._right=4]="_right",t[t._topLeft=5]="_topLeft",t[t._bottomLeft=6]="_bottomLeft",t[t._topRight=7]="_topRight",t[t._bottomRight=8]="_bottomRight"}(mt||(mt={})),function(t){t[t._none=0]="_none",t[t._slideX=1]="_slideX",t[t._slideY=2]="_slideY",t[t._flipX=4]="_flipX",t[t._flipY=8]="_flipY",t[t._resizeX=16]="_resizeX",t[t._resizeY=32]="_resizeY"}(gt||(gt={}));var pt;!function(t){t[t._notConstructed=1]="_notConstructed",t[t._alreadyConstructed=2]="_alreadyConstructed",t[t._unconfiguredBuffer=3]="_unconfiguredBuffer"}(pt||(pt={}));var yt,Mt;!function(t){t[t._none=0]="_none",t[t._top=1]="_top",t[t._bottom=2]="_bottom",t[t._left=4]="_left",t[t._topLeft=5]="_topLeft",t[t._bottomLeft=6]="_bottomLeft",t[t._right=8]="_right",t[t._topRight=9]="_topRight",t[t._bottomRight=10]="_bottomRight"}(yt||(yt={})),function(t){t[t._maximized=1]="_maximized",t[t._fullscreen=2]="_fullscreen",t[t._resizing=3]="_resizing",t[t._activated=4]="_activated"}(Mt||(Mt={}));var wt;!function(t){t[t._invalidGrab=0]="_invalidGrab"}(wt||(wt={}));var xt=function(t,r,e,n){return new(e||(e=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var r;t.done?i(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r)}))).then(s,a)}u((n=n.apply(t,r||[])).next())}))};const At=S.create(([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^self.crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))),Pt=new class{constructor(){this.wlObjects={},this.closed=!1,this._outMessages=[],this._inMessages=[],this._idleHandlers=[]}addIdleHandler(t){this._idleHandlers=[...this._idleHandlers,t]}removeIdleHandler(t){this._idleHandlers=this._idleHandlers.filter(r=>r!==t)}marshallMsg(t,r,e,n){const i={buffer:new ArrayBuffer(e),fds:[],bufferOffset:0},o=new Uint32Array(i.buffer),s=new Uint16Array(i.buffer);o[0]=t,s[2]=r,s[3]=e,i.bufferOffset=8,n.forEach(t=>t._marshallArg(i)),this.onSend(i)}_idle(){return o(this,void 0,void 0,(function*(){for(const t of this._idleHandlers)yield t()}))}message(t){return o(this,void 0,void 0,(function*(){if(!(this.closed||this._inMessages.push(Object.assign(Object.assign({},t),{bufferOffset:0,consumed:0,size:0}))>1)){for(;this._inMessages.length;){const t=this._inMessages[0];for(;t.bufferOffset<t.buffer.length;){const r=t.buffer[t.bufferOffset],e=t.buffer[t.bufferOffset+1];t.size=e>>>16;const n=65535&e;if(t.size>t.buffer.byteLength)throw new Error("Request buffer too small");const i=this.wlObjects[r];if(!i)throw new Error("invalid object "+r);t.bufferOffset+=2,t.consumed=8;try{yield i[n](t)}catch(t){throw console.error(`\nwlObject: ${i.constructor.name}[${n}](..)\nname: ${t.name} message: ${t.message} text: ${t.text}\nerror object stack:\n${t.stack}\n`),this.close(),t}if(this.closed)return}this._inMessages.shift()}this.flush(),yield this._idle()}}))}onSend(t){this.closed||this._outMessages.push(t)}flush(){var t;this.closed||0!==this._outMessages.length&&(null===(t=this.onFlush)||void 0===t||t.call(this,this._outMessages),this._outMessages=[])}close(){this.closed||(Object.values(this.wlObjects).sort((t,r)=>t.id-r.id).forEach(t=>t.destroy()),this.closed=!0)}registerWlObject(t){if(!this.closed){if(t.id in this.wlObjects)throw new Error(`Illegal object id: ${t.id}. Already registered.`);this.wlObjects[t.id]=t}}unregisterWlObject(t){this.closed||delete this.wlObjects[t.id]}},Et=new class{constructor(t){this._recycledIds=[],this._lastId=1,this._connection=t,this._displayProxy=new P(this,this._connection,1),this._destroyPromise=new Promise((t,r)=>{this._destroyResolve=t,this._destroyReject=r}),this._displayProxy.listener={deleteId:t=>{this._recycledIds.push(t)},error:(t,r,e)=>{this._protocolError(t,r,e)}}}close(){this._connection.closed||(this._connection.close(),this._destroyResolve())}_protocolError(t,r,e){this._connection.closed||(this._connection.close(),this._destroyReject(new Error(`Protocol error. type: ${t.constructor.name}, id: ${t.id}, code: ${r}, message: ${e}`)))}onClose(){return this._destroyPromise}getRegistry(){return this._displayProxy.getRegistry()}generateNextId(){return this._recycledIds.length?this._recycledIds.shift():++this._lastId}sync(){return new Promise(t=>{const r=this._displayProxy.sync();r.listener={done:e=>{t(e),r.destroy()}}})}flush(){this._connection.flush()}}(Pt);!function(t,r,e){const n=[];onmessage=n=>{if(r.closed)return;const i=n.data;if(i.protocolMessage instanceof ArrayBuffer){const n=new Uint32Array(i.protocolMessage),o=i.meta.map(t=>{if(t instanceof ArrayBuffer)return e.fromArrayBuffer(t);if(t instanceof ImageBitmap)return e.fromImageBitmap(t);if(t instanceof OffscreenCanvas)return e.fromOffscreenCanvas(t);throw new Error(`COMPOSITOR BUG? Unsupported transferable received from compositor: ${t}.`)});try{r.message({buffer:n,fds:o})}catch(r){t.errorHandler&&"function"==typeof t.errorHandler?t.errorHandler(r):(console.error("\tname: "+r.name+" message: "+r.message+" text: "+r.text),console.error("error object stack: "),console.error(r.stack))}}else console.error("[web-worker-client] server send an illegal message."),r.close()},r.onFlush=t=>xt(this,void 0,void 0,(function*(){if(n.push(t),!(n.length>1))for(;n.length;){const t=n[0],r=t.reduce((t,r)=>t+r.buffer.byteLength,0),e=new Uint32Array(new ArrayBuffer(r));let i=0;const o=[];for(const r of t){for(const t of r.fds){const r=yield t.getTransferable();o.push(r)}const t=new Uint32Array(r.buffer);e.set(t,i),i+=t.length}self.postMessage({protocolMessage:e.buffer,meta:o},[e.buffer,...o]),n.shift()}}))}(Et,Pt,At);var Rt=1e-6,St="undefined"!=typeof Float32Array?Float32Array:Array,Ot=Math.random;Math.PI;function Lt(){var t=new St(16);return St!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Bt(t){var r=new St(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function Tt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function Ct(t,r,e,n,i,o,s,a,u,f,c,l,h,d,_,v){var b=new St(16);return b[0]=t,b[1]=r,b[2]=e,b[3]=n,b[4]=i,b[5]=o,b[6]=s,b[7]=a,b[8]=u,b[9]=f,b[10]=c,b[11]=l,b[12]=h,b[13]=d,b[14]=_,b[15]=v,b}function It(t,r,e,n,i,o,s,a,u,f,c,l,h,d,_,v,b){return t[0]=r,t[1]=e,t[2]=n,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=f,t[9]=c,t[10]=l,t[11]=h,t[12]=d,t[13]=_,t[14]=v,t[15]=b,t}function Ft(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Dt(t,r){if(t===r){var e=r[1],n=r[2],i=r[3],o=r[6],s=r[7],a=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=e,t[6]=r[9],t[7]=r[13],t[8]=n,t[9]=o,t[11]=r[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}function Ut(t,r){var e=r[0],n=r[1],i=r[2],o=r[3],s=r[4],a=r[5],u=r[6],f=r[7],c=r[8],l=r[9],h=r[10],d=r[11],_=r[12],v=r[13],b=r[14],m=r[15],g=e*a-n*s,p=e*u-i*s,y=e*f-o*s,M=n*u-i*a,w=n*f-o*a,x=i*f-o*u,A=c*v-l*_,P=c*b-h*_,E=c*m-d*_,R=l*b-h*v,S=l*m-d*v,O=h*m-d*b,L=g*O-p*S+y*R+M*E-w*P+x*A;return L?(L=1/L,t[0]=(a*O-u*S+f*R)*L,t[1]=(i*S-n*O-o*R)*L,t[2]=(v*x-b*w+m*M)*L,t[3]=(h*w-l*x-d*M)*L,t[4]=(u*E-s*O-f*P)*L,t[5]=(e*O-i*E+o*P)*L,t[6]=(b*y-_*x-m*p)*L,t[7]=(c*x-h*y+d*p)*L,t[8]=(s*S-a*E+f*A)*L,t[9]=(n*E-e*S-o*A)*L,t[10]=(_*w-v*y+m*g)*L,t[11]=(l*y-c*w-d*g)*L,t[12]=(a*P-s*R-u*A)*L,t[13]=(e*R-n*P+i*A)*L,t[14]=(v*p-_*M-b*g)*L,t[15]=(c*M-l*p+h*g)*L,t):null}function jt(t,r){var e=r[0],n=r[1],i=r[2],o=r[3],s=r[4],a=r[5],u=r[6],f=r[7],c=r[8],l=r[9],h=r[10],d=r[11],_=r[12],v=r[13],b=r[14],m=r[15];return t[0]=a*(h*m-d*b)-l*(u*m-f*b)+v*(u*d-f*h),t[1]=-(n*(h*m-d*b)-l*(i*m-o*b)+v*(i*d-o*h)),t[2]=n*(u*m-f*b)-a*(i*m-o*b)+v*(i*f-o*u),t[3]=-(n*(u*d-f*h)-a*(i*d-o*h)+l*(i*f-o*u)),t[4]=-(s*(h*m-d*b)-c*(u*m-f*b)+_*(u*d-f*h)),t[5]=e*(h*m-d*b)-c*(i*m-o*b)+_*(i*d-o*h),t[6]=-(e*(u*m-f*b)-s*(i*m-o*b)+_*(i*f-o*u)),t[7]=e*(u*d-f*h)-s*(i*d-o*h)+c*(i*f-o*u),t[8]=s*(l*m-d*v)-c*(a*m-f*v)+_*(a*d-f*l),t[9]=-(e*(l*m-d*v)-c*(n*m-o*v)+_*(n*d-o*l)),t[10]=e*(a*m-f*v)-s*(n*m-o*v)+_*(n*f-o*a),t[11]=-(e*(a*d-f*l)-s*(n*d-o*l)+c*(n*f-o*a)),t[12]=-(s*(l*b-h*v)-c*(a*b-u*v)+_*(a*h-u*l)),t[13]=e*(l*b-h*v)-c*(n*b-i*v)+_*(n*h-i*l),t[14]=-(e*(a*b-u*v)-s*(n*b-i*v)+_*(n*u-i*a)),t[15]=e*(a*h-u*l)-s*(n*h-i*l)+c*(n*u-i*a),t}function zt(t){var r=t[0],e=t[1],n=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],f=t[8],c=t[9],l=t[10],h=t[11],d=t[12],_=t[13],v=t[14],b=t[15];return(r*s-e*o)*(l*b-h*v)-(r*a-n*o)*(c*b-h*_)+(r*u-i*o)*(c*v-l*_)+(e*a-n*s)*(f*b-h*d)-(e*u-i*s)*(f*v-l*d)+(n*u-i*a)*(f*_-c*d)}function kt(t,r,e){var n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],u=r[5],f=r[6],c=r[7],l=r[8],h=r[9],d=r[10],_=r[11],v=r[12],b=r[13],m=r[14],g=r[15],p=e[0],y=e[1],M=e[2],w=e[3];return t[0]=p*n+y*a+M*l+w*v,t[1]=p*i+y*u+M*h+w*b,t[2]=p*o+y*f+M*d+w*m,t[3]=p*s+y*c+M*_+w*g,p=e[4],y=e[5],M=e[6],w=e[7],t[4]=p*n+y*a+M*l+w*v,t[5]=p*i+y*u+M*h+w*b,t[6]=p*o+y*f+M*d+w*m,t[7]=p*s+y*c+M*_+w*g,p=e[8],y=e[9],M=e[10],w=e[11],t[8]=p*n+y*a+M*l+w*v,t[9]=p*i+y*u+M*h+w*b,t[10]=p*o+y*f+M*d+w*m,t[11]=p*s+y*c+M*_+w*g,p=e[12],y=e[13],M=e[14],w=e[15],t[12]=p*n+y*a+M*l+w*v,t[13]=p*i+y*u+M*h+w*b,t[14]=p*o+y*f+M*d+w*m,t[15]=p*s+y*c+M*_+w*g,t}function Nt(t,r,e){var n,i,o,s,a,u,f,c,l,h,d,_,v=e[0],b=e[1],m=e[2];return r===t?(t[12]=r[0]*v+r[4]*b+r[8]*m+r[12],t[13]=r[1]*v+r[5]*b+r[9]*m+r[13],t[14]=r[2]*v+r[6]*b+r[10]*m+r[14],t[15]=r[3]*v+r[7]*b+r[11]*m+r[15]):(n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],u=r[5],f=r[6],c=r[7],l=r[8],h=r[9],d=r[10],_=r[11],t[0]=n,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=f,t[7]=c,t[8]=l,t[9]=h,t[10]=d,t[11]=_,t[12]=n*v+a*b+l*m+r[12],t[13]=i*v+u*b+h*m+r[13],t[14]=o*v+f*b+d*m+r[14],t[15]=s*v+c*b+_*m+r[15]),t}function Vt(t,r,e){var n=e[0],i=e[1],o=e[2];return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=r[7]*i,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=r[11]*o,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function qt(t,r,e,n){var i,o,s,a,u,f,c,l,h,d,_,v,b,m,g,p,y,M,w,x,A,P,E,R,S=n[0],O=n[1],L=n[2],B=Math.hypot(S,O,L);return B<Rt?null:(S*=B=1/B,O*=B,L*=B,i=Math.sin(e),s=1-(o=Math.cos(e)),a=r[0],u=r[1],f=r[2],c=r[3],l=r[4],h=r[5],d=r[6],_=r[7],v=r[8],b=r[9],m=r[10],g=r[11],p=S*S*s+o,y=O*S*s+L*i,M=L*S*s-O*i,w=S*O*s-L*i,x=O*O*s+o,A=L*O*s+S*i,P=S*L*s+O*i,E=O*L*s-S*i,R=L*L*s+o,t[0]=a*p+l*y+v*M,t[1]=u*p+h*y+b*M,t[2]=f*p+d*y+m*M,t[3]=c*p+_*y+g*M,t[4]=a*w+l*x+v*A,t[5]=u*w+h*x+b*A,t[6]=f*w+d*x+m*A,t[7]=c*w+_*x+g*A,t[8]=a*P+l*E+v*R,t[9]=u*P+h*E+b*R,t[10]=f*P+d*E+m*R,t[11]=c*P+_*E+g*R,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)}function Yt(t,r,e){var n=Math.sin(e),i=Math.cos(e),o=r[4],s=r[5],a=r[6],u=r[7],f=r[8],c=r[9],l=r[10],h=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=o*i+f*n,t[5]=s*i+c*n,t[6]=a*i+l*n,t[7]=u*i+h*n,t[8]=f*i-o*n,t[9]=c*i-s*n,t[10]=l*i-a*n,t[11]=h*i-u*n,t}function Gt(t,r,e){var n=Math.sin(e),i=Math.cos(e),o=r[0],s=r[1],a=r[2],u=r[3],f=r[8],c=r[9],l=r[10],h=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*i-f*n,t[1]=s*i-c*n,t[2]=a*i-l*n,t[3]=u*i-h*n,t[8]=o*n+f*i,t[9]=s*n+c*i,t[10]=a*n+l*i,t[11]=u*n+h*i,t}function Ht(t,r,e){var n=Math.sin(e),i=Math.cos(e),o=r[0],s=r[1],a=r[2],u=r[3],f=r[4],c=r[5],l=r[6],h=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*i+f*n,t[1]=s*i+c*n,t[2]=a*i+l*n,t[3]=u*i+h*n,t[4]=f*i-o*n,t[5]=c*i-s*n,t[6]=l*i-a*n,t[7]=h*i-u*n,t}function $t(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Wt(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xt(t,r,e){var n,i,o,s=e[0],a=e[1],u=e[2],f=Math.hypot(s,a,u);return f<Rt?null:(s*=f=1/f,a*=f,u*=f,n=Math.sin(r),o=1-(i=Math.cos(r)),t[0]=s*s*o+i,t[1]=a*s*o+u*n,t[2]=u*s*o-a*n,t[3]=0,t[4]=s*a*o-u*n,t[5]=a*a*o+i,t[6]=u*a*o+s*n,t[7]=0,t[8]=s*u*o+a*n,t[9]=a*u*o-s*n,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Kt(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qt(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Zt(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Jt(t,r,e){var n=r[0],i=r[1],o=r[2],s=r[3],a=n+n,u=i+i,f=o+o,c=n*a,l=n*u,h=n*f,d=i*u,_=i*f,v=o*f,b=s*a,m=s*u,g=s*f;return t[0]=1-(d+v),t[1]=l+g,t[2]=h-m,t[3]=0,t[4]=l-g,t[5]=1-(c+v),t[6]=_+b,t[7]=0,t[8]=h+m,t[9]=_-b,t[10]=1-(c+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function tr(t,r){var e=new St(3),n=-r[0],i=-r[1],o=-r[2],s=r[3],a=r[4],u=r[5],f=r[6],c=r[7],l=n*n+i*i+o*o+s*s;return l>0?(e[0]=2*(a*s+c*n+u*o-f*i)/l,e[1]=2*(u*s+c*i+f*n-a*o)/l,e[2]=2*(f*s+c*o+a*i-u*n)/l):(e[0]=2*(a*s+c*n+u*o-f*i),e[1]=2*(u*s+c*i+f*n-a*o),e[2]=2*(f*s+c*o+a*i-u*n)),Jt(t,r,e),t}function rr(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t}function er(t,r){var e=r[0],n=r[1],i=r[2],o=r[4],s=r[5],a=r[6],u=r[8],f=r[9],c=r[10];return t[0]=Math.hypot(e,n,i),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(u,f,c),t}function nr(t,r){var e=new St(3);er(e,r);var n=1/e[0],i=1/e[1],o=1/e[2],s=r[0]*n,a=r[1]*i,u=r[2]*o,f=r[4]*n,c=r[5]*i,l=r[6]*o,h=r[8]*n,d=r[9]*i,_=r[10]*o,v=s+c+_,b=0;return v>0?(b=2*Math.sqrt(v+1),t[3]=.25*b,t[0]=(l-d)/b,t[1]=(h-u)/b,t[2]=(a-f)/b):s>c&&s>_?(b=2*Math.sqrt(1+s-c-_),t[3]=(l-d)/b,t[0]=.25*b,t[1]=(a+f)/b,t[2]=(h+u)/b):c>_?(b=2*Math.sqrt(1+c-s-_),t[3]=(h-u)/b,t[0]=(a+f)/b,t[1]=.25*b,t[2]=(l+d)/b):(b=2*Math.sqrt(1+_-s-c),t[3]=(a-f)/b,t[0]=(h+u)/b,t[1]=(l+d)/b,t[2]=.25*b),t}function ir(t,r,e,n){var i=r[0],o=r[1],s=r[2],a=r[3],u=i+i,f=o+o,c=s+s,l=i*u,h=i*f,d=i*c,_=o*f,v=o*c,b=s*c,m=a*u,g=a*f,p=a*c,y=n[0],M=n[1],w=n[2];return t[0]=(1-(_+b))*y,t[1]=(h+p)*y,t[2]=(d-g)*y,t[3]=0,t[4]=(h-p)*M,t[5]=(1-(l+b))*M,t[6]=(v+m)*M,t[7]=0,t[8]=(d+g)*w,t[9]=(v-m)*w,t[10]=(1-(l+_))*w,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function or(t,r,e,n,i){var o=r[0],s=r[1],a=r[2],u=r[3],f=o+o,c=s+s,l=a+a,h=o*f,d=o*c,_=o*l,v=s*c,b=s*l,m=a*l,g=u*f,p=u*c,y=u*l,M=n[0],w=n[1],x=n[2],A=i[0],P=i[1],E=i[2],R=(1-(v+m))*M,S=(d+y)*M,O=(_-p)*M,L=(d-y)*w,B=(1-(h+m))*w,T=(b+g)*w,C=(_+p)*x,I=(b-g)*x,F=(1-(h+v))*x;return t[0]=R,t[1]=S,t[2]=O,t[3]=0,t[4]=L,t[5]=B,t[6]=T,t[7]=0,t[8]=C,t[9]=I,t[10]=F,t[11]=0,t[12]=e[0]+A-(R*A+L*P+C*E),t[13]=e[1]+P-(S*A+B*P+I*E),t[14]=e[2]+E-(O*A+T*P+F*E),t[15]=1,t}function sr(t,r){var e=r[0],n=r[1],i=r[2],o=r[3],s=e+e,a=n+n,u=i+i,f=e*s,c=n*s,l=n*a,h=i*s,d=i*a,_=i*u,v=o*s,b=o*a,m=o*u;return t[0]=1-l-_,t[1]=c+m,t[2]=h-b,t[3]=0,t[4]=c-m,t[5]=1-f-_,t[6]=d+v,t[7]=0,t[8]=h+b,t[9]=d-v,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ar(t,r,e,n,i,o,s){var a=1/(e-r),u=1/(i-n),f=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(e+r)*a,t[9]=(i+n)*u,t[10]=(s+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*f,t[15]=0,t}function ur(t,r,e,n,i){var o,s=1/Math.tan(r/2);return t[0]=s/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}function fr(t,r,e,n){var i=Math.tan(r.upDegrees*Math.PI/180),o=Math.tan(r.downDegrees*Math.PI/180),s=Math.tan(r.leftDegrees*Math.PI/180),a=Math.tan(r.rightDegrees*Math.PI/180),u=2/(s+a),f=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(s-a)*u*.5,t[9]=(i-o)*f*.5,t[10]=n/(e-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*e/(e-n),t[15]=0,t}function cr(t,r,e,n,i,o,s){var a=1/(r-e),u=1/(n-i),f=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(r+e)*a,t[13]=(i+n)*u,t[14]=(s+o)*f,t[15]=1,t}function lr(t,r,e,n){var i,o,s,a,u,f,c,l,h,d,_=r[0],v=r[1],b=r[2],m=n[0],g=n[1],p=n[2],y=e[0],M=e[1],w=e[2];return Math.abs(_-y)<Rt&&Math.abs(v-M)<Rt&&Math.abs(b-w)<Rt?Ft(t):(c=_-y,l=v-M,h=b-w,i=g*(h*=d=1/Math.hypot(c,l,h))-p*(l*=d),o=p*(c*=d)-m*h,s=m*l-g*c,(d=Math.hypot(i,o,s))?(i*=d=1/d,o*=d,s*=d):(i=0,o=0,s=0),a=l*s-h*o,u=h*i-c*s,f=c*o-l*i,(d=Math.hypot(a,u,f))?(a*=d=1/d,u*=d,f*=d):(a=0,u=0,f=0),t[0]=i,t[1]=a,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=l,t[7]=0,t[8]=s,t[9]=f,t[10]=h,t[11]=0,t[12]=-(i*_+o*v+s*b),t[13]=-(a*_+u*v+f*b),t[14]=-(c*_+l*v+h*b),t[15]=1,t)}function hr(t,r,e,n){var i=r[0],o=r[1],s=r[2],a=n[0],u=n[1],f=n[2],c=i-e[0],l=o-e[1],h=s-e[2],d=c*c+l*l+h*h;d>0&&(c*=d=1/Math.sqrt(d),l*=d,h*=d);var _=u*h-f*l,v=f*c-a*h,b=a*l-u*c;return(d=_*_+v*v+b*b)>0&&(_*=d=1/Math.sqrt(d),v*=d,b*=d),t[0]=_,t[1]=v,t[2]=b,t[3]=0,t[4]=l*b-h*v,t[5]=h*_-c*b,t[6]=c*v-l*_,t[7]=0,t[8]=c,t[9]=l,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1,t}function dr(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function _r(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function vr(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t[8]=r[8]+e[8],t[9]=r[9]+e[9],t[10]=r[10]+e[10],t[11]=r[11]+e[11],t[12]=r[12]+e[12],t[13]=r[13]+e[13],t[14]=r[14]+e[14],t[15]=r[15]+e[15],t}function br(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t[6]=r[6]-e[6],t[7]=r[7]-e[7],t[8]=r[8]-e[8],t[9]=r[9]-e[9],t[10]=r[10]-e[10],t[11]=r[11]-e[11],t[12]=r[12]-e[12],t[13]=r[13]-e[13],t[14]=r[14]-e[14],t[15]=r[15]-e[15],t}function mr(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t[8]=r[8]*e,t[9]=r[9]*e,t[10]=r[10]*e,t[11]=r[11]*e,t[12]=r[12]*e,t[13]=r[13]*e,t[14]=r[14]*e,t[15]=r[15]*e,t}function gr(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t[6]=r[6]+e[6]*n,t[7]=r[7]+e[7]*n,t[8]=r[8]+e[8]*n,t[9]=r[9]+e[9]*n,t[10]=r[10]+e[10]*n,t[11]=r[11]+e[11]*n,t[12]=r[12]+e[12]*n,t[13]=r[13]+e[13]*n,t[14]=r[14]+e[14]*n,t[15]=r[15]+e[15]*n,t}function pr(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]&&t[11]===r[11]&&t[12]===r[12]&&t[13]===r[13]&&t[14]===r[14]&&t[15]===r[15]}function yr(t,r){var e=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],f=t[7],c=t[8],l=t[9],h=t[10],d=t[11],_=t[12],v=t[13],b=t[14],m=t[15],g=r[0],p=r[1],y=r[2],M=r[3],w=r[4],x=r[5],A=r[6],P=r[7],E=r[8],R=r[9],S=r[10],O=r[11],L=r[12],B=r[13],T=r[14],C=r[15];return Math.abs(e-g)<=Rt*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(n-p)<=Rt*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(i-y)<=Rt*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(o-M)<=Rt*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(s-w)<=Rt*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(a-x)<=Rt*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-A)<=Rt*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(f-P)<=Rt*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(c-E)<=Rt*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(l-R)<=Rt*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(h-S)<=Rt*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(d-O)<=Rt*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(_-L)<=Rt*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(v-B)<=Rt*Math.max(1,Math.abs(v),Math.abs(B))&&Math.abs(b-T)<=Rt*Math.max(1,Math.abs(b),Math.abs(T))&&Math.abs(m-C)<=Rt*Math.max(1,Math.abs(m),Math.abs(C))}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});var Mr=kt,wr=br;function xr(){var t=new St(3);return St!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ar(t){var r=new St(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function Pr(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function Er(t,r,e){var n=new St(3);return n[0]=t,n[1]=r,n[2]=e,n}function Rr(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function Sr(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function Or(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function Lr(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function Br(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function Tr(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function Cr(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function Ir(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function Fr(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function Dr(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function Ur(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function jr(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function zr(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function kr(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=r[2]-t[2];return Math.hypot(e,n,i)}function Nr(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=r[2]-t[2];return e*e+n*n+i*i}function Vr(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function qr(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function Yr(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function Gr(t,r){var e=r[0],n=r[1],i=r[2],o=e*e+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o,t}function Hr(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function $r(t,r,e){var n=r[0],i=r[1],o=r[2],s=e[0],a=e[1],u=e[2];return t[0]=i*u-o*a,t[1]=o*s-n*u,t[2]=n*a-i*s,t}function Wr(t,r,e,n){var i=r[0],o=r[1],s=r[2];return t[0]=i+n*(e[0]-i),t[1]=o+n*(e[1]-o),t[2]=s+n*(e[2]-s),t}function Xr(t,r,e,n,i,o){var s=o*o,a=s*(2*o-3)+1,u=s*(o-2)+o,f=s*(o-1),c=s*(3-2*o);return t[0]=r[0]*a+e[0]*u+n[0]*f+i[0]*c,t[1]=r[1]*a+e[1]*u+n[1]*f+i[1]*c,t[2]=r[2]*a+e[2]*u+n[2]*f+i[2]*c,t}function Kr(t,r,e,n,i,o){var s=1-o,a=s*s,u=o*o,f=a*s,c=3*o*a,l=3*u*s,h=u*o;return t[0]=r[0]*f+e[0]*c+n[0]*l+i[0]*h,t[1]=r[1]*f+e[1]*c+n[1]*l+i[1]*h,t[2]=r[2]*f+e[2]*c+n[2]*l+i[2]*h,t}function Qr(t,r){r=r||1;var e=2*Ot()*Math.PI,n=2*Ot()-1,i=Math.sqrt(1-n*n)*r;return t[0]=Math.cos(e)*i,t[1]=Math.sin(e)*i,t[2]=n*r,t}function Zr(t,r,e){var n=r[0],i=r[1],o=r[2],s=e[3]*n+e[7]*i+e[11]*o+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*i+e[8]*o+e[12])/s,t[1]=(e[1]*n+e[5]*i+e[9]*o+e[13])/s,t[2]=(e[2]*n+e[6]*i+e[10]*o+e[14])/s,t}function Jr(t,r,e){var n=r[0],i=r[1],o=r[2];return t[0]=n*e[0]+i*e[3]+o*e[6],t[1]=n*e[1]+i*e[4]+o*e[7],t[2]=n*e[2]+i*e[5]+o*e[8],t}function te(t,r,e){var n=e[0],i=e[1],o=e[2],s=e[3],a=r[0],u=r[1],f=r[2],c=i*f-o*u,l=o*a-n*f,h=n*u-i*a,d=i*h-o*l,_=o*c-n*h,v=n*l-i*c,b=2*s;return c*=b,l*=b,h*=b,d*=2,_*=2,v*=2,t[0]=a+c+d,t[1]=u+l+_,t[2]=f+h+v,t}function re(t,r,e,n){var i=[],o=[];return i[0]=r[0]-e[0],i[1]=r[1]-e[1],i[2]=r[2]-e[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function ee(t,r,e,n){var i=[],o=[];return i[0]=r[0]-e[0],i[1]=r[1]-e[1],i[2]=r[2]-e[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function ne(t,r,e,n){var i=[],o=[];return i[0]=r[0]-e[0],i[1]=r[1]-e[1],i[2]=r[2]-e[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function ie(t,r){var e=t[0],n=t[1],i=t[2],o=r[0],s=r[1],a=r[2],u=Math.sqrt(e*e+n*n+i*i)*Math.sqrt(o*o+s*s+a*a),f=u&&Hr(t,r)/u;return Math.acos(Math.min(Math.max(f,-1),1))}function oe(t){return t[0]=0,t[1]=0,t[2]=0,t}function se(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function ae(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function ue(t,r){var e=t[0],n=t[1],i=t[2],o=r[0],s=r[1],a=r[2];return Math.abs(e-o)<=Rt*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-s)<=Rt*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-a)<=Rt*Math.max(1,Math.abs(i),Math.abs(a))}var fe,ce=Lr,le=Br,he=Tr,de=kr,_e=Nr,ve=Pr,be=Vr,me=(fe=xr(),function(t,r,e,n,i,o){var s,a;for(r||(r=3),e||(e=0),a=n?Math.min(n*r+e,t.length):t.length,s=e;s<a;s+=r)fe[0]=t[s],fe[1]=t[s+1],fe[2]=t[s+2],i(fe,fe,o),t[s]=fe[0],t[s+1]=fe[1],t[s+2]=fe[2];return t});function ge(t,r,e){const n=t.createShader(r);if(null===n)throw new Error("Could not create shader.");if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw t.deleteShader(n),new Error("An error occurred compiling the shaders: "+t.getShaderInfoLog(n));return n}function pe(t){const r=function(t,r,e){const n=ge(t,t.VERTEX_SHADER,r);if(null===n)throw new Error("Could not create vertex shader.");const i=ge(t,t.FRAGMENT_SHADER,e);if(null===i)throw new Error("Could not crate fragment shader.");const o=t.createProgram();if(null===o)throw new Error("Could not create shader program");if(t.attachShader(o,n),t.attachShader(o,i),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error("Unable to initialize the shader program: "+t.getProgramInfoLog(o));return o}(t,"\n    attribute vec4 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    varying lowp vec4 vColor;\n\n    void main(void) {\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n      vColor = aVertexColor;\n    }\n  ","\n    varying lowp vec4 vColor;\n\n    void main(void) {\n      gl_FragColor = vColor;\n    }\n  "),e=t.getUniformLocation(r,"uProjectionMatrix");if(null===e)throw new Error("Could not find uniform location uProjectionMatrix");const n=t.getUniformLocation(r,"uModelViewMatrix");if(null===n)throw new Error("Could not find uniform location uModelViewMatrix");return{programInfo:{program:r,attribLocations:{vertexPosition:t.getAttribLocation(r,"aVertexPosition"),vertexColor:t.getAttribLocation(r,"aVertexColor")},uniformLocations:{projectionMatrix:e,modelViewMatrix:n}},buffers:function(t){const r=t.createBuffer();if(null===r)throw new Error("Could not create buffer.");t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW);const e=t.createBuffer();if(null===e)throw new Error("Could not create buffer.");return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,0,0,1,0,1,0,1,0,0,1,1]),t.STATIC_DRAW),{position:r,color:e}}(t)}}class ye{constructor(t,r){this.proxy=t,this.bufferProxy=r}static create(t){const r=t.createWebGlBuffer(),e=t.createBuffer(r),n=new ye(r,e);return r.listener=n,e.listener=n,n}async offscreenCanvas(t){this.canvas=await t.getTransferable()}release(){}}class Me{constructor(t){this._frameCount=0,this._gl=null,this._registry=t}static create(){const t=Et.getRegistry(),r=new Me(t);return t.listener=r,r}global(t,r,e){switch(r){case"wl_compositor":this._compositor=this._registry.bind(t,"wl_compositor",T,e),this._surface=this._compositor.createSurface(),this._onFrame=(n=this._surface,()=>new Promise(t=>{const r=n.frame();r.listener={done:e=>{t(e),r.destroy()}}}));break;case"gr_web_gl":this._webGL=this._registry.bind(t,"gr_web_gl",dt,e),this._glBuffer=ye.create(this._webGL);break;case"wl_shell":this._shell=this._registry.bind(t,"wl_shell",k,e);break;case"wl_seat":this._seat=this._registry.bind(t,"wl_seat",W,e),this._seat.listener=this}var n}async init(t,r){if(void 0===this._shell)throw new Error("No shell.");if(void 0===this._surface)throw new Error("No surface.");this._shellSurface=this._shell.getShellSurface(this._surface),this._shellSurface.listener=this,this._shellSurface.setToplevel(),this._shellSurface.setTitle("Simple WebGL");const e=Et.sync();if(Et.flush(),await e,void 0===this._glBuffer)throw new Error("No GLBuffer.");if(void 0===this._glBuffer.canvas)throw new Error("No canvas on GLBuffer.");if(this._glBuffer.canvas.width=t,this._glBuffer.canvas.height=r,this._gl=this._glBuffer.canvas.getContext("webgl",{desynchronized:!0,alpha:!0,preserveDrawingBuffer:!1}),null===this._gl)throw new Error("No WebGL context.");this._drawState=pe(this._gl),setInterval(()=>{console.log(`Simpl-WebGL: ${this._frameCount} fps`),this._frameCount=0},1e3)}async draw(t){var r;if(void 0===this._surface)throw new Error("No surface.");if(void 0===this._glBuffer)throw new Error("No GLBuffer.");if(void 0===this._glBuffer.canvas)throw new Error("No canvas on GLBuffer.");if(null===this._gl)throw new Error("No gl context.");if(void 0===this._drawState)throw new Error("No drawing state.");!function(t,{programInfo:r,buffers:e},o){const s=.001*o;t.clearColor(0,0,0,.7),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);const a=45*Math.PI/180,u=t.canvas.width/t.canvas.height,f=n.create();n.perspective(f,a,u,.1,100);const c=n.create();n.translate(c,c,i.fromValues(-0,0,-6)),n.rotate(c,c,s,i.fromValues(0,0,1));{const n=2,i=t.FLOAT,o=!1,s=0,a=0;t.bindBuffer(t.ARRAY_BUFFER,e.position),t.vertexAttribPointer(r.attribLocations.vertexPosition,n,i,o,s,a),t.enableVertexAttribArray(r.attribLocations.vertexPosition)}{const n=4,i=t.FLOAT,o=!1,s=0,a=0;t.bindBuffer(t.ARRAY_BUFFER,e.color),t.vertexAttribPointer(r.attribLocations.vertexColor,n,i,o,s,a),t.enableVertexAttribArray(r.attribLocations.vertexColor)}t.useProgram(r.program),t.uniformMatrix4fv(r.uniformLocations.projectionMatrix,!1,f),t.uniformMatrix4fv(r.uniformLocations.modelViewMatrix,!1,c),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.commit&&t.commit()}(this._gl,this._drawState,t),this._surface.attach(this._glBuffer.bufferProxy,0,0),this._surface.damage(0,0,this._glBuffer.canvas.width,this._glBuffer.canvas.height),null===(r=this._onFrame)||void 0===r||r.call(this).then(t=>this.draw(t)),this._surface.commit(0),Et.flush(),this._frameCount++}globalRemove(t){}configure(t,r,e){}ping(t){if(void 0===this._shellSurface)throw new Error("No shellsurface.");this._shellSurface.pong(t)}popupDone(){}capabilities(t){if(void 0===this._seat)throw new Error("No seat.");t&X._pointer?(this._pointer=this._seat.getPointer(),this._pointer.listener=this):this._pointer&&(this._pointer.release(),this._pointer=void 0)}name(t){}axis(t,r,e){}axisDiscrete(t,r){}axisSource(t){}axisStop(t,r){}button(t,r,e,n){void 0!==this._shellSurface&&void 0!==this._seat&&n&Z._pressed&&this._shellSurface.move(this._seat,t)}enter(t,r,e,n){}frame(){}leave(t,r){}motion(t,r,e){}}!async function(){const t=Me.create(),r=Et.sync();Et.flush(),await r,await t.init(800,600),t.draw(0),Et.flush();try{await Et.onClose(),console.log("Application exit.")}catch(t){console.error("Application terminated with error."),console.error(t.stackTrace)}}()}});